{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/classes/imageLoader.ts","src/classes/imageLoaderProxy.ts","src/classes/iterator.ts","src/main.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","ImageLoader","prototype","loadImage","imageUrl","callback","this","image","document","createElement","onload","imageLoaded","bind","onerror","imageLoadError","src","console","log","imageLoader_1","ImageLoaderProxy","cacheList","imageLoader","hasElement","findInCache","ele","obj","imgeEle","push","Iterator","list","counter","iLen","hasNext","getNext","reset","iterator_1","imageLoaderProxy_1","Main","iterator","loadNextImage","url","handleImageLoaded","body","appendChild"],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export class ImageLoader{\n    imageUrl:string;\n    callback:Function;\n    image:HTMLImageElement;\n    constructor(){\n        \n    }\n\n    public loadImage(imageUrl:string, callback:Function){\n        this.imageUrl = imageUrl;\n        this.callback = callback;\n        this.image = document.createElement('img') as HTMLImageElement;\n        this.image.onload = this.imageLoaded.bind(this);\n        this.image.onerror = this.imageLoadError.bind(this);\n        this.image.src = this.imageUrl;\n        //setTimeout(this.callback,1000);\n    }\n\n    private imageLoaded(){\n        console.log(\"image load ---------\")\n        this.callback(this.image);\n    }\n\n    private imageLoadError(){\n        console.log(\"error occred while loading image \"+ this.imageUrl);\n        this.callback(null);\n    }\n}","import {ImageLoader} from \"./imageLoader\";\n\nexport class ImageLoaderProxy{\n    cacheList:Array<any>\n    // this is callback method which is main->handleImageLoaded()\n    callback:Function; \n    imageLoader:ImageLoader;\n    imageUrl:string;\n    context;\n   // imageLoadedCallback:Function;\n\n    constructor(){\n        this.cacheList = [];\n        this.imageLoader = new ImageLoader()\n       // this.imageLoadedCallback = this.imageLoaded.bind(this)\n    }\n\n    public loadImage(imageUrl:string, callback:Function){\n        this.callback = callback;\n        var hasElement:any = this.findInCache(imageUrl);\n        if(hasElement != null){\n            console.log(\"from cache\")\n            this.callback(hasElement);\n        } else{\n            this.imageUrl = imageUrl;\n            this.imageLoader.loadImage(imageUrl, this.imageLoaded.bind(this));\n        }\n        \n    }\n\n    public imageLoaded(ele:HTMLImageElement){\n        console.log(this);\n        console.log(\"image load ---------\", ele)\n        var obj = {imageUrl:this.imageUrl, imgeEle:ele};\n        this.cacheList.push(obj);\n        this.callback(obj);\n    }\n\n    private findInCache(imageUrl:string):any {\n     //   var iLen:number = this.cacheList.length;\n        // for (var index = 0; index < iLen; index++) {\n        //     var element = this.cacheList[index];\n        //     if(element.imageUrl == imageUrl){\n        //         return element;\n        //     } \n        // }\n        return null;\n    }\n}","export class Iterator{\n    list:Array<any>;\n    counter:number;\n    iLen:number;\n\n    constructor(list:Array<any>){\n        this.list = list;\n        this.counter = 0;\n        this.iLen = this.list.length;\n    }\n\n    public hasNext():Boolean{\n        if(this.counter >= this.iLen){\n            return false;\n        }\n        return true;\n    }\n\n    public getNext():any{\n        var obj:any = this.list[this.counter];\n        this.counter++;\n        return obj;\n    }\n\n    public reset(){\n        this.counter = 0;\n    }\n\n}","import { Iterator } from './classes/iterator';\nimport { ImageLoaderProxy } from './classes/imageLoaderProxy';\n\n\nclass Main{\n    iterator:Iterator;\n    imageLoader:ImageLoaderProxy;\n\n    constructor(){\n        var list:Array<any> = [\n            \"images/apple.jpg\"\n        ]\n\n        this.iterator = new Iterator(list);\n        this.imageLoader = new ImageLoaderProxy();\n    }\n\n    public loadNextImage(){\n        if(this.iterator.hasNext() == true){\n            var url:string = this.iterator.getNext();\n            this.imageLoader.loadImage(url, this.handleImageLoaded.bind(this));\n        }\n    }\n\n    private handleImageLoaded(obj){\n        console.log(\"image load success\");\n        if(obj != null && obj.imgeEle != null){\n            document.body.appendChild(obj.imgeEle)\n        }\n        this.loadNextImage();\n    }\n}\n\nvar obj:Main = new Main();\nobj.loadNextImage();"]}